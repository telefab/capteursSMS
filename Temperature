#include <OneWire.h>
#define DS18B20 0x28
#define BROCHE_ONEWIRE 7


OneWire ds(BROCHE_ONEWIRE);


void getTemperature (float *temp)
{
    byte data[9], addr[8];
          
    ds.reset();
    ds.skip();

    ds.write(0x44,1);
    delay(800);
    
    ds.reset();
    ds.skip();
    ds.write(0xBE);
    
    for (byte i=0 ; i<9 ; i++)
      data[i] = ds.read();
      
     *temp = ((data[1] << 8) | data[0]) * 0.0625;       // Pb ici
}


void setup() 
{
    Serial.begin(9600);
}


void loop () 
{
    float temp=0;

    getTemperature (&temp);     // Demande la tempÃ©rature
    Serial.print("Temperature : ");     // Puis l'affiche
    Serial.print(temp);
    Serial.write(176);
    Serial.write('C');
    Serial.println();
}
   
